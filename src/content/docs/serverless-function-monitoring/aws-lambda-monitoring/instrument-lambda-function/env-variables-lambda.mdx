---
title: Environment variables for AWS Lambda
metaDescription: "Learn how to set and use environment variables in AWS Lambda functions for configuration and secrets management."
freshnessValidatedDate: never
tags:
  - AWS Lambda
  - Environment Variables
  - Configuration
  - Secrets Management
---
Environment variables are a way to store configuration and secrets outside of your code. The following tables display the mandatory variables and runtime specific variables that you can set to monitor your Lambda functions with New Relic.

## Mandatory environment variables
Regardless of your runtime, you must set the following environment variables to monitor your Lambda functions with New Relic:

     <table>
        <thead>
          <tr>
            <th style={{ width: "200px" }}>Variable Name</th>
            {/* <th>Options</th>
            <th>Default value</th> */}
            <th>Description</th>
            
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>`NEW_RELIC_ACCOUNT_ID`</td>
            {/* <td>Sets the environment type.</td>
            <td></td> */}
            <td>Your New Relic account ID.</td>
           
          </tr>
          <tr>
            <td>`NEW_RELIC_LAMBDA_HANDLER`</td>
            {/* <td></td>
            <td></td> */}
            <td>Used by our handler wrapper to find your function's actual handler.</td>
          </tr>
          <tr>
            <td>`NEW_RELIC_LICENSE_KEY`</td>
            {/* <td></td>
            <td></td> */}
            <td>Your New Relic ingest key. This overrides Secrets Manager.</td>
          </tr>
          <tr>
            <td>`NEW_RELIC_TRUSTED_ACCOUNT_KEY`</td>
            {/* <td></td>
            <td></td> */}
            <td>Your New Relic account ID or parent ID, if it exists.</td> 
          </tr>

        </tbody>
      </table>

## Additional environment variables

Based on your runtime, you can set the following environment variables to further configure the New Relic Lambda monitoring:



<Tabs>
  <TabsBar>
    <TabsBarItem id="nodejs">Node.js</TabsBarItem>
    <TabsBarItem id="python">Python</TabsBarItem>
    <TabsBarItem id="java">Java</TabsBarItem>
    <TabsBarItem id="Go">Go</TabsBarItem>
    <TabsBarItem id="Ruby">Ruby</TabsBarItem>
    <TabsBarItem id=".NET">.NET</TabsBarItem>
    <TabsBarItem id="Lambda extension">Lambda extension</TabsBarItem>
  </TabsBar>

  <TabsPages>
    <TabsPageItem id="nodejs">
  <table>
    <thead>
        <tr>
            <th>Environment variable</th>
            <th>Default value</th>
            <th>Options</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>

        <tr>
            <td>`NEW_RELIC_USE_ESM`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>(Mandatory)ESM functions that use async/await and not callbacks.</td>
        </tr>

        <tr>
            <td>`NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Enable or disable distributed tracing.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_NO_CONFIG_FILE`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>The Node.js agent uses environment variables in Lambda, so this should be set to `true`.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_APP_NAME`</td>
            <td></td>
            <td></td>
            <td>Should be set but is not used in the New Relic UI. Instead, entity names come from the AWS integration.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_ENABLED`</td>
            <td>`false`</td>
            <td>`true`,`false`</td>
            <td>Enable or disable agent logging.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_LEVEL`</td>
            <td>`info`</td>
            <td>`fatal`, `error`, `warn`, `info`, `debug`, `trace`</td>
            <td>Agent log level.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG`</td>
            <td>`stdout`</td>
            <td>`stdout`</td>
            <td>Agent log path should be stdout for the Node.js agent in serverless mode.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_USE_ESM`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>ESM functions that use async/await and not callbacks.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_NATIVE_METRICS_ENABLED`</td>
            <td>`true`</td>
            <td>`true`, `false`</td>
            <td>Should be set to `false` to reduce cold start duration. When set to `false` it doesn't collect VM metrics.</td>
        </tr>
    </tbody>
</table>

You can find more environment variables in our [Node.js configuration documentation](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/).
    </TabsPageItem>
    <TabsPageItem id="python">
 <table>
    <thead>
        <tr>
            <th>Environment variable</th>
            <th>Default value</th>
            <th>Options</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        
        <tr>
            <td>`NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Enable or disable distributed tracing (Java excluded).</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_NO_CONFIG_FILE`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Agent uses environment variables in Lambda so this should be set to `true`.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_APP_NAME`</td>
            <td></td>
            <td></td>
            <td>Should be set but is not used in the New Relic UI. Instead, entity names come from the AWS integration.</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG`</td>
            <td>`stderr`</td>
            <td>`stderr`</td>
            <td>Agent log path should be `stderr `for the Python agent in serverless mode</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_LEVEL`</td>
            <td>`info`</td>
            <td>`critical`, `error`, `warning`, `info`, `debug`</td>
            <td>Agent log level</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_SERVERLESS_MODE_ENABLED`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>This should be set to `true` so the agent will run in serverless mode</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_PACKAGE_REPORTING_ENABLED`</td>
            <td>`true`</td>
            <td>`true`, `false`</td>
            <td>Python agent package reporting should be set to `false` to improve cold start times</td>
        </tr>
    </tbody>
</table>

You can find more environment variables in our [Python configuration documentation](/docs/apm/agents/python-agent/configuration/python-agent-configuration).
    </TabsPageItem>

    <TabsPageItem id="java">
<table>
    <thead>
        <tr>
            <th>Environment variable</th>
            <th>Default value</th>
            <th>Options</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
       
        <tr>
            <td>`NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Enable or disable distributed tracing</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_PRIMARY_APPLICATION_ID`</td>
            <td></td>
            <td></td>
            <td>Your New Relic account ID</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_DEBUG`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Agent log level</td>
        </tr>
    </tbody>
</table>

    </TabsPageItem>

    <TabsPageItem id='Go'>

    For Go, you don't need to set any additional environment variables. 
    </TabsPageItem >

    <TabsPageItem id="Ruby">

    <table>
    <thead>
        <tr>
            <th>Environment variable</th>
            <th>Default value</th>
            <th>Options</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
       
        <tr>
            <td>`NEW_RELIC_DISTRIBUTED_TRACING_ENABLED`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Enable or disable distributed tracing</td>
        </tr>
        
    </tbody>
</table>

    </TabsPageItem>

    <TabsPageItem id=".NET">

    <table>
        <thead>
            <tr>
                <th>Environment variable</th>
                <th>Default value</th>
                <th>Options</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>`CORECLR_ENABLE_PROFILING`</td>
                <td>`0`</td>
                <td>`0`, `1`</td>
                <td>Required: This must be set to `1` in order for the .NET agent to instrument your application.</td>
            </tr>
            <tr>
                <td>`CORECLR_PROFILER`</td>
                <td></td>
                <td>`{36032161-FFC0-4B61-B559-F6C5D41BAE5A}`</td>
                <td>Required: This must be set to `{36032161-FFC0-4B61-B559-F6C5D41BAE5A}` in order for the .NET agent
                    to instrument your application.</td>
            </tr>
            <tr>
                <td>`CORECLR_NEWRELIC_HOME`</td>
                <td></td>
                <td>`/opt/lib/newrelic-dotnet-agent`</td>
                <td>Required: This must be set to `/opt/lib/newrelic-dotnet-agent` in order for the .NET agent to
                    instrument your application via our layer.</td>
            </tr>
            <tr>
                <td>`CORECLR_PROFILER_PATH`</td>
                <td></td>
                <td>`/opt/lib/newrelic-dotnet-agent/libNewRelicProfiler.so`</td>
                <td>Required: This must be set to `/opt/lib/newrelic-dotnet-agent/libNewRelicProfiler.so` in order for
                    the .NET agent to instrument your application via our layer.</td>
            </tr>
            <tr>
                <td>`NEW_RELIC_APP_NAME`</td>
                <td></td>
                <td></td>
                <td>Should be set but is not used in the New Relic UI. Instead, entity names come from the AWS
                    integration.</td>
            </tr>
            <tr>
                <td>`NEW_RELIC_LOG_ENABLED`</td>
                <td>`1`</td>
                <td>`1`, `0`</td>
                <td>Enable or disable agent logging</td>
            </tr>
            <tr>
                <td>`NEW_RELIC_LOG_CONSOLE`</td>
                <td>`0`</td>
                <td>`1`, `0`</td>
                <td>Must be set to `1` to output logs to CloudWatch</td>
            </tr>
            <tr>
                <td>`NEW_RELIC_LOG_LEVEL`</td>
                <td>`info`</td>
                <td>`info`, `debug`, `finest`</td>
                <td>Agent log level</td>
            </tr>
        </tbody>
    </table>

    You can find more environment variables in our [.NET configuration documentation](/docs/apm/agents/net-agent/configuration/net-agent-configuration/) and [layerless instrumentation](/docs/serverless-function-monitoring/aws-lambda-monitoring/instrument-lambda-function/enable-serverless-monitoring-aws-lambda-layerless/#dotnet) method.   

    </TabsPageItem>

    <TabsPageItem id="Lambda extension">

<table>
    <thead>
        <tr>
            <th>Environment variable</th>
            <th>Default value</th>
            <th>Options</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>`NEW_RELIC_LAMBDA_EXTENSION_ENABLED`</td>
            <td>`true`</td>
            <td>`true`, `false` </td>
            <td>Enable or disable the extension</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LICENSE_KEY_SECRET`</td>
            <td>`NEW_RELIC_LICENSE_KEY`</td>
            <td></td>
            <td>Custom secret name in AWS Secrets Manager</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_DATA_COLLECTION_TIMEOUT`</td>
            <td>10s</td>
            <td></td>
            <td>Reduce timeout duration when for `Telemetry client error`</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_EXTENSION_LOGS_ENABLED`</td>
            <td>`true`</td>
            <td>`true`, `false`</td>
            <td>Enable or disable `[NR_EXT]` log lines</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_EXTENSION_LOG_LEVEL`</td>
            <td>`INFO`</td>
            <td>`INFO`, `DEBUG`</td>
            <td>log level for NR_EXT log lines</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_EXTENSION_SEND_FUNCTION_LOGS`</td>
            <td>`false`</td>
            <td>`true`, `false`</td>
            <td>Send function logs</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_LOG_ENDPOINT`</td>
            <td>`https://log-api.newrelic.com/log/v1`</td>
            <td>`https://log-api.newrelic.com/log/v1`, `https://log-api.eu.newrelic.com/log/v1`</td>
            <td>Logs endpoint</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_TELEMETRY_ENDPOINT`</td>
            <td>`https://cloud-collector.newrelic.com/aws/lambda/v1`</td>
            <td>`https://cloud-collector.newrelic.com/aws/lambda/v1`, `https://cloud-collector.eu01.nr-data.net/aws/lambda/v1`</td>
            <td>Telemetry endpoint</td>
        </tr>
        <tr>
            <td>`NEW_RELIC_IGNORE_EXTENSION_CHECKS`</td>
            <td></td>
            <td></td>
            <td>(Optional) Use this variable to bypass checks by supplying them as comma separated values within a string. You can use `handler`, `agent`, `sanity`, `vendor`, or `all` string values.</td>
        </tr>
    </tbody>
</table>

See more environment variables for the New Relic extension in our [documentation](https://github.com/newrelic/newrelic-lambda-extension/blob/cf86fb53f0bd816e1d09d07f7b5c5ab4841010a0/config/config.go#L41-L55).

    </TabsPageItem>


    </TabsPages>    
</Tabs>
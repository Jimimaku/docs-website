---
title: "Install and configure Azure function monitoring on New Relic"
metaDescription: Configure your Azure functions with New Relic 
freshnessValidatedDate: never

---

## Before you begin [#begin]

If you haven't done so, you may want to check that your Lambda function meets our [compatibility and requirements](/docs/serverless-function-monitoring/azure-function-monitoring/compatibility-requirement-azure-monitoring).

<Steps>

<Step>
## Link your Azure account to New Relic

You can link your Azure account to New Relic by configuring the polling of Azure Monitor metrics. This will allow you to see the metrics in the New Relic UI. For more information, see [Azure integration](https://docs.newrelic.com/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-functions-monitoring-integration/#polling).
</Step>

<Step>
## Instrument your Azure Function with the New Relic .NET Agent

Based on your requirement, select one of the following options to instrument your Azure Function with the New Relic .NET Agent.

<Tabs>
  <TabsBar>
    
    <TabsBarItem id="linux-instrumentation">Linux</TabsBarItem>
    <TabsBarItem id="windows-instrumentation">Windows</TabsBarItem>
    <TabsBarItem id="containerized-instrumentation">Containerized functions</TabsBarItem>
  </TabsBar>

  <TabsPages>

    <TabsPageItem id="linux-instrumentation">

    1. Add the `NewRelic.Agent` NuGet package to your application project.
      * In Visual Studio code editor, use the NuGet Package Manager to search for and add the latest version of `NewRelic.Agent` to your application.
      * If you're using other development environments, you can add the package with `dotnet add packages NewRelic.Agent`.

    2. Use your preferred publishing mechanism to deploy your updated application to Azure. This includes the New Relic agent, which is installed to the `/home/site/www/newrelic` folder.
   
    </TabsPageItem>
    <TabsPageItem id="windows-instrumentation">
    
    1. Navigate to the Kudu service page and do the following:
      1. In the Azure portal, navigate to your function app.
      2. Click the <DNT>**Development tools**</DNT> section, and select <DNT>**Advanced Tools > Go**</DNT>.
      3. Click the <DNT>**Site extensions**</DNT> tab to view the available site extension to install.
      4. Search for the `New Relic .NET Agent` and to install the extension, click <DNT>**+**</DNT>.

    </TabsPageItem>

    <TabsPageItem id="containerized-instrumentation">
    
    In the final stage of your Dockerfile, add the following lines to install the New Relic .NET agent:

    ```dockerfile
    # install the latest New Relic .NET agent using the apt-get package manager
      RUN apt-get update && apt-get install -y wget ca-certificates gnupg \
      && echo 'deb http://apt.newrelic.com/debian/ newrelic non-free' | tee /etc/apt/sources.list.d/newrelic.list \
      && wget https://download.newrelic.com/548C16BF.gpg \
      && apt-key add 548C16BF.gpg \
      && apt-get update \
      && apt-get install -y newrelic-dotnet-agent \
      && rm -rf /var/lib/apt/lists/*

    ```


    </TabsPageItem>
    
  </TabsPages>
</Tabs>


</Step>

<Step>
## Configure the environment variables

After you've instrumented your Azure Function with the New Relic .NET Agent, you need to configure the environment variables to send the data to New Relic. For more information, refer to [configure environment variables](/docs/serverless-function-monitoring/azure-function-monitoring/env-variables-azure).


</Step>

<Step>
## Restart your Azure Function

After you've added the environment variables, restart your Azure Function to apply the changes.
</Step>

<Step>
## Send traffic to your Azure Function

Send traffic to the azure function and review the NewRelic UI dashboard to see the metrics.
</Step>

</Steps>
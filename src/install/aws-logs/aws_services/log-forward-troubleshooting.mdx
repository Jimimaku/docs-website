---
headingText: Log forward troubleshooting
componentType: default
---
It's possible that you may get issues with log ingestion to New Relic after configuration. This page will help you to resolve the possible errors you may have.

## Failing to create a stack [#stack-failure]
For a stack failure, do the following checks in your AWS account:
1. Ensure that the selected IAM role (if you have selected during CloudFormation stack creation) has sufficient permissions to create IAM roles. If you have not selected IAM role, make sure your account has enough permissions.
2. If the failure message appears as **Resource type `resource-type` with identifier `resource-identifier` already exists**, delete or rename the existing resources with that name, and retry.
3. Check the output of the nested CloudFormation stacks to identify possible errors.
4. Ensure that the selected S3 buckets don’t have event notifications on any of the object creating events.
5. Ensure that the selected CloudWatch groups don’t have any other similar subscription filters.

## Failing to delete a stack [#stack-delete]
If you are not able to delete a stake, perform the follwing steps in your AWS account:
1. Identify the S3 buckets created by the stack (For example, the S3 bucket created for Firehose error logs).
2. Archive the available content, and make it empty.
3. Retry deleting the stack.

## Logs not flowing from Cloudwatch via Lambda [#Cloudwatch-lambda-error]
If the logs are not appearing for a <DNT>**Cloudwatch via Lambda**</DNT> integration setup, do the following checks in your AWS account:
1. Navigate to <DNT>**CloudFormation stack > Resources**</DNT> and find the resource with Logical Id `NewRelicLogsLicenseKeySecret` and validate the New Relic Ingest License Key.
2. Check the <DNT>**CloudWatch logs**</DNT> for the Lambda function to further debug.
3. Set the `DEBUG_MODE` parameter to `true` in the Lambda function’s environment variables to get debug logs. Navigate to <DNT>**CloudFormation Stack > Resources > NewRelicServerlessLogForwarder (Lambda Function) > Configuration > Environment Variables**</DNT>.
4. Check the <DNT>**DLQ resource**</DNT> in the CloudFormation stack to see if the event was a genuine failure. Navigate to <DNT>**CloudFormation Stack > Resources > NewRelicLogForwarderDLQ**</DNT>, or search for your <DNT>**DLQ**</DNT> in AWS SQS.
5. Ensure the New Relic region and the Ingest License Key provided to the Lambda function or Firehose are correctly matched (For example, if the New Relic region is EU, provide a New Relic Ingest License Key from the EU region).
6. Check if `NewRelicServerlessLogForwarder` has the <DNT>**CloudWatch trigger**</DNT>. Check the output of the nested CloudFormation stacks to find this issue.
## Logs not flowing from S3 via Lambda [#S3-lambda-error]
If the logs are not appearing for an <DNT>**S3 via Lambda**</DNT> integration setup, do the following checks in your AWS account:
1. Follow the steps in [Logs not flowing from Cloudwatch via Lambda](/aws-logs/#Cloudwatch-lambda-error).
2. Ensure that the S3 files are adhering to the [log forwarding restrictions](/install/aws-logs/aws_services/log-forwarding-limitations).
3. Check if `NewRelicServerlessLogForwarder` has the <DNT>**S3 trigger**</DNT>. Check the output of the nested CloudFormation stacks to find this issue.
## Logs not flowing from Cloudwatch via Firehose [#Cloudwatch-firehose-error]
If the logs are not appearing for a <DNT>**Cloudwatch via Lambda**</DNT> integration setup, do the following checks in your AWS account:
1. Update your API key to the correct Ingest License key. Navigate to <DNT>**Amazon Data Firehose > Firehose streams > your-stream > Edit destination settings**</DNT>.
2. Verify the <DNT>**endpoint**</DNT>.
3. Check the <DNT>**S3 logs**</DNT> or <DNT>**CloudWatch error logs**</DNT>.
## Custom attributes not appearing [attribut-not-appearing]
If the custom attributes for the logs are not appearing in New Relic, do the following checks in your AWS account:
* For <DNT>**S3 via Lambda**</DNT> or <DNT>**CloudWatch via Lambda**</DNT>, ensure that the `CUSTOM_META_DATA` environment variable is set and a valid JSON value is available.
* For <DNT>**CloudWatch via Firehose**</DNT>, ensure that your key-value pairs are present under <DNT>**Parameters**</DNT>.
* For all cases, ensure that your key names don’t overlap with the forbidden keywords mentioned in AWS logs in context.